<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Firebase</title>
  </head>
  <body>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js';
      import {
        getFirestore,
        collection,
        doc,
        getDoc,
        getDocs,
        query,
        where,
        setDoc,
      } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js';
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: 'AIzaSyDxrvDm3Az9goHS0ghoN-xKx4XGyPoAPgo',
        authDomain: 'test-1387e.firebaseapp.com',
        projectId: 'test-1387e',
        storageBucket: 'test-1387e.firebasestorage.app',
        messagingSenderId: '501826119456',
        appId: '1:501826119456:web:9ce1d1e57aec867d6f9945',
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      const myQuery = query(collection(db, 'users'), where('blood', '==', 'A'));

      getDocs(myQuery)
        .then((snapshot) => {
          snapshot.forEach((doc) => {
            console.log(doc.id, '=>', doc.data());
          });
        })
        .catch((error) => {
          console.error(error);
        });

      const myDoc = doc(db, 'users', 'suzuki');
      const data = {
        age: '20',
      };
      setDoc(myDoc, data, { merge: true })
        .then(() => {
          console.log('Document written successfully');
        })
        .catch((error) => {
          console.error(error);
        });
    </script>
  </body>
</html>
